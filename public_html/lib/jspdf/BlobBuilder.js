var BlobBuilder=BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder||function(t){"use strict";var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},o=function(t,e,n){this.data=t,this.size=t.length,this.type=e,this.encoding=n},a=n.prototype,i=o.prototype,r=t.FileReaderSync,c=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),s=l.length,d=t.URL||t.webkitURL||t,u=d.createObjectURL,R=d.revokeObjectURL,f=d,p=t.btoa,h=t.atob,b=!1,g=function(t){b=!t},B=t.ArrayBuffer,E=t.Uint8Array;for(n.fake=i.fake=!0;s--;)c.prototype[l[s]]=s+1;try{E&&g.apply(0,new E(1))}catch(U){}return d.createObjectURL||(f=t.URL={}),f.createObjectURL=function(t){var e,n=t.type;return null===n&&(n="application/octet-stream"),t instanceof o?(e="data:"+n,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):p?e+";base64,"+p(t.data):e+","+encodeURIComponent(t.data)):u?u.call(d,t):void 0},f.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&R&&R.call(d,t)},a.append=function(t){var n=this.data;if(E&&t instanceof B)if(b)n.push(String.fromCharCode.apply(String,new E(t)));else for(var a="",i=new E(t),l=0,s=i.length;s>l;l++)a+=String.fromCharCode(i[l]);else if("Blob"===e(t)||"File"===e(t)){if(!r)throw new c("NOT_READABLE_ERR");var d=new r;n.push(d.readAsBinaryString(t))}else t instanceof o?"base64"===t.encoding&&h?n.push(h(t.data)):"URI"===t.encoding?n.push(decodeURIComponent(t.data)):"raw"===t.encoding&&n.push(t.data):("string"!=typeof t&&(t+=""),n.push(unescape(encodeURIComponent(t))))},a.getBlob=function(t){return arguments.length||(t=null),new o(this.data.join(""),t,"raw")},a.toString=function(){return"[object BlobBuilder]"},i.slice=function(t,e,n){var a=arguments.length;return 3>a&&(n=null),new o(this.data.slice(t,a>1?e:this.data.length),n,this.encoding)},i.toString=function(){return"[object Blob]"},n}(self);